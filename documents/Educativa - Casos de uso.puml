@startuml
title Diagrama de Casos de Uso - Software Educativa

left to right direction

actor :Profesor: as Teacher
actor :Estudiante: as Student

rectangle "Sistema Educativa" {
  ' Casos de Uso de Autenticación y Cuenta
  usecase "Registrarse en el sistema" as UC_Register
  usecase "Iniciar Sesión" as UC_Login
  usecase "Recuperar Contraseña" as UC_ForgotPassword
  
  ' Casos de Uso Comunes para usuarios logueados
  usecase "Cerrar Sesión" as UC_Logout
  usecase "Configurar Perfil Inicial (Rol, Institución, Foto)" as UC_SetupProfile
  
  ' Casos de Uso del Profesor
  usecase "Crear una nueva clase" as UC_CreateClass
  usecase "Consultar desempeño de estudiantes" as UC_ViewStudentPerformance
  usecase "Ver estadísticas de la clase" as UC_ViewClassStats
  
  ' Casos de Uso del Estudiante
  usecase "Unirse a una clase" as UC_JoinClass
  usecase "Realizar prueba interactiva" as UC_TakeTest
  usecase "Verificar estado de prueba" as UC_CheckTestStatus

  ' Casos de uso extendidos o incluidos
  usecase "Descargar reporte en PDF" as UC_DownloadReport
  usecase "Ver material de apoyo recomendado" as UC_ViewSupportMaterial
  usecase "Generar código de clase" as UC_GenerateCode
  usecase "Enviar email de recuperación" as UC_SendEmail
  usecase "Guardar resultados y calcular riesgo" as UC_SaveResults

  UC_ForgotPassword ..> UC_SendEmail : <<include>>
  UC_CreateClass ..> UC_GenerateCode : <<include>>
  
  UC_ViewStudentPerformance ..> UC_DownloadReport : <<extend>>
  UC_ViewStudentPerformance ..> UC_ViewSupportMaterial : <<extend>>
  
  UC_TakeTest ..> UC_SaveResults : <<include>>
}

' --- Relaciones de Actores a Casos de Uso ---

' Funciones compartidas por ambos roles, antes y después de iniciar sesión
Teacher -- UC_Register
Teacher -- UC_Login
Teacher -- UC_ForgotPassword
Teacher -- UC_Logout
Teacher -- UC_SetupProfile

Student -- UC_Register
Student -- UC_Login
Student -- UC_ForgotPassword
Student -- UC_Logout
Student -- UC_SetupProfile

' Funciones específicas del Profesor
Teacher -- UC_CreateClass
Teacher -- UC_ViewStudentPerformance
Teacher -- UC_ViewClassStats

' Funciones específicas del Estudiante
Student -- UC_JoinClass
Student -- UC_CheckTestStatus
Student -- UC_TakeTest

@enduml